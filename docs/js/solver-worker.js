!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=6)}([function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return r}));var i,n=s(2);!function(t){t[t.NORTH=1]="NORTH",t[t.WEST=2]="WEST",t[t.EAST=4]="EAST",t[t.SOUTH=8]="SOUTH"}(i||(i={}));class r{constructor(t,e){this.h=t,this.w=e,this.tiles=new Array(t).fill(null).map(()=>new Array(e).fill(0)),this.addTopWalls(),this.addBottomWalls(),this.addLeftWalls(),this.addRightWalls()}addWall(t,e,s){if(t<0||t>=this.w)throw Error(`x must be between 0 and ${this.w-1}, was: ${t}`);if(e<0||e>=this.h)throw Error(`y must be between 0 and ${this.h-1}, was: ${e}`);this.addSingleWall(t,e,s);const i=this.getTileBehindTheWall(t,e,s);if(i){const t=this.getOppositeWall(s);this.addSingleWall(i.x,i.y,t)}}addRandomWalls(t){let e=0,s=0;for(;e<t&&s<1e3;){s++;const t=n.b([i.NORTH,i.EAST,i.WEST,i.SOUTH]),r=n.a(0,this.w-1),o=n.a(0,this.h-1);this.tiles[o][r]&t||(this.addWall(r,o,t),e++)}}addSingleWall(t,e,s){const i=this.tiles[e][t];this.tiles[e][t]=i|s}getTileBehindTheWall(t,e,s){return s===i.NORTH&&e>0?{x:t,y:e-1}:s===i.WEST&&t>0?{x:t-1,y:e}:s===i.EAST&&t+1<this.w?{x:t+1,y:e}:s===i.SOUTH&&e+1<this.h?{x:t,y:e+1}:null}getOppositeWall(t){switch(t){case i.NORTH:return i.SOUTH;case i.SOUTH:return i.NORTH;case i.EAST:return i.WEST;case i.WEST:return i.EAST;default:throw Error("Invalid wall "+t)}}addTopWalls(){for(let t=0;t<this.w;t++)this.addSingleWall(t,0,i.NORTH)}addBottomWalls(){for(let t=0;t<this.w;t++)this.addSingleWall(t,this.h-1,i.SOUTH)}addLeftWalls(){for(let t=0;t<this.h;t++)this.addSingleWall(0,t,i.WEST)}addRightWalls(){for(let t=0;t<this.h;t++)this.addSingleWall(this.w-1,t,i.EAST)}}},function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return r})),s.d(e,"d",(function(){return o})),s.d(e,"a",(function(){return a}));var i=s(0);function n(t,e,s){const n={x:e.x,y:e.y},r=Math.max(...s.filter(t=>t.x===n.x&&t.y<n.y).map(t=>t.y));for(;n.y>0&&(n.y-1!==r&&!l(t,n.x,n.y,i.b.NORTH));n.y--);return n.y===e.y?null:{pos:n,dir:"upp"}}function r(t,e,s){const n={x:e.x,y:e.y},r=Math.min(...s.filter(t=>t.x===e.x&&t.y>n.y).map(t=>t.y));for(;n.y<t.h&&(n.y+1!==r&&!l(t,e.x,n.y,i.b.SOUTH));n.y++);return n.y===e.y?null:{pos:n,dir:"ner"}}function o(t,e,s){const n={x:e.x,y:e.y},r=Math.max(...s.filter(t=>t.y===n.y&&t.x<n.x).map(t=>t.x));for(;n.x>0&&(n.x-1!==r&&!l(t,n.x,n.y,i.b.WEST));n.x--);return n.x===e.x?null:{pos:n,dir:"vänster"}}function a(t,e,s){const n={x:e.x,y:e.y},r=Math.min(...s.filter(t=>t.y===n.y&&t.x>n.x).map(t=>t.x));for(;n.x<t.w&&(n.x+1!==r&&!l(t,n.x,n.y,i.b.EAST));n.x++);return n.x===e.x?null:{pos:n,dir:"höger"}}function l(t,e,s,i){return 0!=(t.tiles[s][e]&i)}},function(t,e,s){"use strict";let i,n;function r(t,e){if(null==t)throw new Error("Invalid parameters, enter max, or max and min values");if(null==e&&(e=0),t<e)var s=t,i=e;else s=e,i=t;return s+Math.floor(l()*(i+1-s))}function o(t){return t[r(0,t.length-1)]}s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return h})),s.d(e,"d",(function(){return c})),h(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER));var a,l=(a=Math.pow(2,32),function(){return(n=(1664525*n+1013904223)%a)/a});function h(t){i=t,n=t}function c(t){var e,s,i;for(i=t.length;i;i-=1)e=Math.floor(l()*i),s=t[i-1],t[i-1]=t[e],t[e]=s;return t}},function(t,e,s){"use strict";var i;s.d(e,"a",(function(){return i})),function(t){t.PING="PING",t.PONG="PONG",t.SOLVE="SOLVE",t.SOLVE_END="SOLVE_END",t.SOLVE_PROGRESS="SOLVE_PROGRESS"}(i||(i={}))},,,function(t,e,s){"use strict";s.r(e);var i=s(1);const n=1e5,r=t=>null!==t;class o{constructor(t,e,s){this.checkedStates=new Map,this.statesUnchecked=new Set,this.uncheckedStates=[],this.completed=!1,this.running=!1,this.foundRoute=[],this.message="",this.duration=0,this.tile=t=>t.x+t.y*this.board.w,this.getState=t=>t.map(t=>this.tile(t)).join("|"),this.board=t,this.robots=e,this.goal=s,console.log("GOAL",s),this.goalTile=this.tile(this.goal)}solve(){const t=this.getState(this.robots);this.uncheckedStates=[{previous:"",color:0,dir:"",state:t,robots:this.robots.slice()}],this.statesUnchecked=new Set(t);const e=new Date;for(this.running=!0;this.running;)this.progressCallback&&this.checkedStates.size%100==0&&this.progressCallback({checkedStates:this.checkedStates.size}),this.checkNext();this.duration=((new Date).getTime()-e.getTime())/1e3,this.completeCallback&&this.completeCallback(this.getResult())}isCompleted(){return this.isCompleted}getResult(){return{duration:this.duration,statesChecked:this.checkedStates.size,completed:this.completed,running:this.running,route:this.foundRoute,message:this.message}}onComplete(t){this.completeCallback=t}onProgress(t){this.progressCallback=t}checkNext(){const t=this.uncheckedStates.shift();if(void 0===t)return this.message="No more moves to check... I guess this level is impossible",void(this.running=!1);const{state:e,robots:s,previous:i}=t;if(this.statesUnchecked.delete(e),!this.isGoalReached(s))return s.forEach((t,i)=>{const n=this.getNewStates(s,i).filter(t=>!this.checkedStates.has(t.state)).filter(t=>!this.statesUnchecked.has(t.state)).map(t=>Object.assign(Object.assign({},t),{previous:e}));n.length&&(this.uncheckedStates.push(...n),n.forEach(t=>this.statesUnchecked.add(t.state)))}),this.checkedStates.set(e,t),this.checkedStates.size===n?(this.message=`Checked ${n} states. Abort!`,void(this.running=!1)):void 0;this.goalReached(t,i)}isGoalReached(t){return this.tile(t[this.goal.color])===this.goalTile}goalReached(t,e){this.completed=!0,this.running=!1;let s=t;for(;s.previous;){this.foundRoute.unshift(s);const t=this.checkedStates.get(s.previous);if(void 0===t)throw Error(`state ${e} not found`);s=t}this.message=`Level solved in ${this.foundRoute.length} moves`}getNewStates(t,e){const s=t[e],n=t.filter(t=>t.color!==e);return[Object(i.b)(this.board,s,n),Object(i.c)(this.board,s,n),Object(i.d)(this.board,s,n),Object(i.a)(this.board,s,n)].filter(r).map(s=>{const i=t.slice();return i[e]={x:s.pos.x,y:s.pos.y,color:i[e].color},{state:this.getState(i),robots:i,dir:s.dir,color:e}})}}var a=s(3);function l(t){postMessage({type:a.a.SOLVE_END,result:t}),close()}function h(t){postMessage({type:a.a.SOLVE_PROGRESS,progress:t})}self.onmessage=function(t){switch(t.data.type){case a.a.SOLVE:{const{board:e,robots:s,goal:i}=t.data.level,n=new o(e,s,i);n.onComplete(l),n.onProgress(h),n.solve();break}default:throw Error("Worker recieved an unknown message"+t.data.type)}}}]);